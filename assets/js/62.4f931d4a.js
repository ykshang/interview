(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{517:function(t,_,v){"use strict";v.r(_);var r=v(3),s=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"重绘和重排-回流"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重绘和重排-回流"}},[t._v("#")]),t._v(" 重绘和重排（回流）")]),t._v(" "),_("h2",{attrs:{id:"_1-概念"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念"}},[t._v("#")]),t._v(" 1. 概念")]),t._v(" "),_("p",[t._v("在 CSS 中，元素的某些属性的变化会触发浏览器的 "),_("code",[t._v("重绘（Repaint）")]),t._v("或 "),_("code",[t._v("重排（Reflow，也称为重渲染或回流）")]),t._v("。了解这些差异可以帮助开发同学优化页面性能，避免不必要的性能开销。")]),t._v(" "),_("p",[_("strong",[t._v("重绘：")]),t._v(" 当一个元素的外观发生改变，但没有改变布局,重新把元素外观绘制出来的过程，叫做重绘。")]),t._v(" "),_("p",[_("strong",[t._v("重排：")]),t._v(" 当 DOM 的变化影响了元素的几何信息(元素的的位置和尺寸大小)，浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排。")]),t._v(" "),_("h2",{attrs:{id:"_2-常见的引起重绘的属性"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-常见的引起重绘的属性"}},[t._v("#")]),t._v(" 2. 常见的引起重绘的属性")]),t._v(" "),_("p",[_("strong",[t._v("元素尺寸不变")]),t._v(" ，主要包含")]),t._v(" "),_("p",[_("strong",[t._v("元素的颜色、背景、阴影等发生变化")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[t._v("color")])]),t._v(" "),_("th",[_("strong",[t._v("border-style")])]),t._v(" "),_("th",[_("strong",[t._v("visibility")])]),t._v(" "),_("th",[_("strong",[t._v("background")])])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[t._v("outline-width")])]),t._v(" "),_("td",[_("strong",[t._v("background-position")])]),t._v(" "),_("td",[_("strong",[t._v("background-repeat")])]),t._v(" "),_("td",[_("strong",[t._v("outline-color")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("background-image")])]),t._v(" "),_("td",[_("strong",[t._v("outline-style")])]),t._v(" "),_("td",[_("strong",[t._v("border-radius")])]),t._v(" "),_("td",[_("strong",[t._v("box-shadow")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("background-size")])]),t._v(" "),_("td",[_("strong",[t._v("outline")])]),t._v(" "),_("td",[_("strong",[t._v("text-decoration")])]),t._v(" "),_("td")])])]),t._v(" "),_("h2",{attrs:{id:"_3-常见引起重排属性和方法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-常见引起重排属性和方法"}},[t._v("#")]),t._v(" 3.常见引起重排属性和方法")]),t._v(" "),_("p",[t._v("主要是元素的"),_("code",[t._v("尺寸和位置发生变化")]),t._v("，主要包含：")]),t._v(" "),_("ol",[_("li",[t._v("可以设置元素"),_("code",[t._v("尺寸、位置")]),t._v("的"),_("code",[t._v("CSS 属性")])]),t._v(" "),_("li",[t._v("内容发生变化，如"),_("code",[t._v("图片或者文本内容")]),t._v("，"),_("code",[t._v("可以引起元素的位置、尺寸变化")]),t._v("。")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[t._v("width")])]),t._v(" "),_("th",[_("strong",[t._v("height")])]),t._v(" "),_("th",[_("strong",[t._v("margin")])]),t._v(" "),_("th",[_("strong",[t._v("padding")])])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[t._v("display")])]),t._v(" "),_("td",[_("strong",[t._v("border-width")])]),t._v(" "),_("td",[_("strong",[t._v("border")])]),t._v(" "),_("td",[_("strong",[t._v("position")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("overflow")])]),t._v(" "),_("td",[_("strong",[t._v("font-size")])]),t._v(" "),_("td",[_("strong",[t._v("vertical-align")])]),t._v(" "),_("td",[_("strong",[t._v("min-height")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("clientWidth")])]),t._v(" "),_("td",[_("strong",[t._v("clientHeight")])]),t._v(" "),_("td",[_("strong",[t._v("clientTop")])]),t._v(" "),_("td",[_("strong",[t._v("clientLeft")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("scrollWidth")])]),t._v(" "),_("td",[_("strong",[t._v("scrollHeight")])]),t._v(" "),_("td",[_("strong",[t._v("scrollTop")])]),t._v(" "),_("td",[_("strong",[t._v("scrollLeft")])])]),t._v(" "),_("tr",[_("td",[_("strong",[t._v("getComputedStyle()")])]),t._v(" "),_("td",[_("strong",[t._v("getBoundingClientRect()")])]),t._v(" "),_("td",[_("strong",[t._v("scrollIntoViewIfNeeded()")])]),t._v(" "),_("td",[_("strong",[t._v("伪类：如：hover")])])])])]),t._v(" "),_("h2",{attrs:{id:"_4-什么情况下会触发重绘"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-什么情况下会触发重绘"}},[t._v("#")]),t._v(" 4. 什么情况下会触发重绘")]),t._v(" "),_("p",[t._v("触发回流时一定会触发重绘，除此之外，例如颜色修改，设置圆角、文本方向修改，阴影修改等。")]),t._v(" "),_("h2",{attrs:{id:"_5-什么情况下会触发回流"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-什么情况下会触发回流"}},[t._v("#")]),t._v(" 5. 什么情况下会触发回流")]),t._v(" "),_("p",[t._v("回流这一阶段主要是计算节点的位置和几何信息，那么当页面布局和几何信息发生变化的时候，就需要回流，如下面情况：")]),t._v(" "),_("ol",[_("li",[t._v("添加或删除可见的 DOM 元素")]),t._v(" "),_("li",[t._v("元素的位置发生变化")]),t._v(" "),_("li",[t._v("元素的尺寸发生变化（包括外边距、内边框、边框大小、高度和宽度等）")]),t._v(" "),_("li",[t._v("内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代")]),t._v(" "),_("li",[t._v("页面一开始渲染的时候（这避免不了）")]),t._v(" "),_("li",[t._v("浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）")])]),t._v(" "),_("p",[_("strong",[t._v("提示：重绘不一定导致重排，但重排一定会导致重绘。")])]),t._v(" "),_("h2",{attrs:{id:"_6-减少重排-回流-的优化方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-减少重排-回流-的优化方式"}},[t._v("#")]),t._v(" 6. 减少重排（回流）的优化方式")]),t._v(" "),_("h4",{attrs:{id:"_1-控制范围"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-控制范围"}},[t._v("#")]),t._v(" 1. 控制范围")]),t._v(" "),_("ol",[_("li",[t._v("精准修改：操作 DOM 节点的时候，尽量控制范围，精确到某个节点，尽量不要去改动包裹他的父层。")]),t._v(" "),_("li",[t._v("table、 flex 布局：元素在变化的时候，尽量不要影响整个布局。")])]),t._v(" "),_("h4",{attrs:{id:"_2-减少次数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-减少次数"}},[t._v("#")]),t._v(" 2. 减少次数")]),t._v(" "),_("ol",[_("li",[t._v("集中操作：不影响逻辑的情况下，尽量把获取和操作DOM节点的代码分组，集中操作，典型的就是设置class属性。")]),t._v(" "),_("li",[t._v("读写分离：对DOM节点的读写尽量不要混编，即读中夹写， 写中夹读。这样会更容易触发回流")]),t._v(" "),_("li",[t._v("display：将元素的display属性设置为none，修改完全部的样式修改以后，再重新设置显示。这样对主体页面回流的影响只有两次。")]),t._v(" "),_("li",[t._v("脱离文档流：absolute或fixed可以将元素脱离文档流，重排开销小，不会对其他部分产生影响")])])])}),[],!1,null,null,null);_.default=s.exports}}]);