# 软链接和硬链接

简介： 硬链接（hard link）对一个文件进行修改，可能会影响到其他文件的内容，但是删除一个文件名，并不会影响其他文件名的访问。

## 1、硬链接与软链接的定义

**硬链接（hard link）：** 对一个文件进行修改，可能会影响到其他硬链接的文件的内容，但是删除一个文件名，并不会影响其他文件名的访问。

**软链接：** 可以说成是符号连接，它有点类似于 Windows 的快捷方式，实际上它是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。

## 2、硬链接

#### 2.1、创建原始文件

我们创建一个文件`hard`, 并将`"hello kangkang，this file for hard-link"`写入文件

```shell
# 创建一个文件，并写入字符串

$ touch hard

# 列出文件列表

$ ll
total 0
-rw-r--r-- 1 53563 197609 0 Jan 20 20:21 hard

# 对文件写入内容

$ echo '"hello kangkang，this file for hard-link"' > hard

# 打印文件内容

$ cat hard
"hello kangkang，this file for hard-link"

```

#### 2.2、创建硬链接文件

我们创建一个文件`hard-1`，并查看内容

```bash
# 新增硬链接文件hard-1
$ ln hard hard-1

# 打印hard-1文件，查看内容
$ cat hard-1
"hello kangkang，this file for hard-link"

# 查看当前文件列表
$ ls -li
total 2
1125899906921561 -rw-r--r-- 2 53563 197609 43 Jan 20 20:31 hard
1125899906921561 -rw-r--r-- 2 53563 197609 43 Jan 20 20:31 hard-1
```

我们可以看到，两个文件除了名字不一样，其他都是一样的。

#### 2.3、修改硬链接文件内容,并作比对

我们将`"test hard-link"`写入`hard-1`，打印两个文件，查看一下内容

```powershell
# 将"test hard-link"写入hard-1
$ echo '"test hard-link"' >>hard-1

# 打印hard-1文件，查看内容
$ cat hard-1
"hello kangkang，this file for hard-link"
"test hard-link"

# 打印hard文件，查看内容
$ cat hard
"hello kangkang，this file for hard-link"
"test hard-link"
```

#### 2.4、我们尝试再新增一个硬链接文件

我们尝试新增一个 `hard-2` 文件，并将 `"test hard-link 2"` 写入，打印并对比三个文件的内容。

```powershell
# 新增硬链接文件hard-1
$ ln hard hard-2

# 打印hard-2文件，查看内容
$ cat hard-2
"hello kangkang，this file for hard-link"
"test hard-link"

# 将"test hard-link 2"写入hard-2
$ echo '"test hard-link 2"' >>hard-2

# 查看当前文件列表
$ ll
total 3
-rw-r--r-- 4 53563 197609 79 Jan 20 20:43 hard
-rw-r--r-- 4 53563 197609 79 Jan 20 20:43 hard-1
-rw-r--r-- 4 53563 197609 79 Jan 20 20:43 hard-2

# 打印hard-2文件，查看内容
$ cat hard-2
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"

# 打印hard文件，查看内容
$ cat hard
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"

# 打印hard-1文件，查看内容
$ cat hard-1
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"
```

#### 2.4、删除硬链接文件

我们尝试删掉`hard-2`文件，查看`hard`和`hard-1`文件发现内容没有变化

```powershell
# 删除hard-2文件
$ rm hard-2

# 列出当前文件列表
$ ll
total 2
-rw-r--r-- 3 53563 197609 79 Jan 20 20:43 hard
-rw-r--r-- 3 53563 197609 79 Jan 20 20:43 hard-1

# 打印hard文件，查看内容有无变化
$ cat hard
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"

# 打印hard-1文件，查看内容有无变化
$ cat hard-1
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"
```

我们再尝试删掉原始的 `hard` 文件、发现仅剩的 `hard-1` 内容依然没变化

```powershell
# 删除hard
$ rm hard

# 打印hard-1文件，查看内容有无变化
$ cat hard-1
"hello kangkang，this file for hard-link"
"test hard-link"
"test hard-link 2"

# 列出当前文件列表
$ ll
total 1
-rw-r--r-- 2 53563 197609 79 Jan 20 20:43 hard-1
```

## 2、软链接
